# –õ–µ–∫—Ü–∏—è 9. –†–∞–±–æ—Ç–∞ —Å Option, Result –∏ —Ñ–∞–π–ª–∞–º–∏ –≤ Rust

## 1. –ü–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏–µ `Option<T>`

`Option<T>` –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –º–æ–∂–µ—Ç **—Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å** (`Some`) –∏–ª–∏ **–æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å** (`None`).

```rust
fn main() {
    let some_number = Some(5);
    let no_number: Option<i32> = None;

    match some_number {
        Some(n) => println!("–ß–∏—Å–ª–æ: {}", n),
        None => println!("–ù–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è"),
    }
}
```

* `Option<T>` –ø–æ–ª–µ–∑–µ–Ω –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö –∑–Ω–∞—á–µ–Ω–∏–π –±–µ–∑ `null`.
* `match`, `if let` –∏ `unwrap_or` –ø–æ–∑–≤–æ–ª—è—é—Ç —É–¥–æ–±–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å `Option`.

### –ü—Ä–∏–º–µ—Ä—ã

```rust
fn divide(a: i32, b: i32) -> Option<i32> {
    if b == 0 {
        None
    } else {
        Some(a / b)
    }
}
```

---

## 2. –ü–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏–µ `Result<T, E>`

`Result<T, E>` ‚Äî —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ–ø–µ—Ä–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –±—ã—Ç—å **—É—Å–ø–µ—à–Ω—ã–º** (`Ok(T)`) –∏–ª–∏ **–æ—à–∏–±–∫–æ–π** (`Err(E)`).

```rust
fn main() {
    let result: Result<i32, &str> = Ok(10);

    match result {
        Ok(val) => println!("–£—Å–ø–µ—Ö: {}", val),
        Err(e) => println!("–û—à–∏–±–∫–∞: {}", e),
    }
}
```

### –ü–æ–ª–µ–∑–Ω—ã–µ –º–µ—Ç–æ–¥—ã:

```rust
fn square(n: i32) -> Result<i32, String> {
    if n >= 0 {
        Ok(n * n)
    } else {
        Err("–ß–∏—Å–ª–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–º".to_string())
    }
}
```

* `unwrap()` ‚Äî –∏–∑–≤–ª–µ–∫–∞–µ—Ç `Ok`, –≤—ã–∑—ã–≤–∞–µ—Ç –ø–∞–Ω–∏–∫—É –ø—Ä–∏ `Err`.
* `unwrap_or(default)` ‚Äî –∏–∑–≤–ª–µ–∫–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –∏–ª–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `default`.
* `?` ‚Äî –æ–ø–µ—Ä–∞—Ç–æ—Ä, –∫–æ—Ç–æ—Ä—ã–π —É–ø—Ä–æ—â–∞–µ—Ç —Ü–µ–ø–æ—á–∫—É `Result`.

---

## 3. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### –ü–∞–Ω–∏–∫–∞ (`panic!`)

```rust
fn main() {
    panic!("–ß—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫!");
}
```

* –ü—Ä–µ—Ä—ã–≤–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã.

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `Result` –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—à–∏–±–∫–∞–º–∏

```rust
fn divide(a: f64, b: f64) -> Result<f64, String> {
    if b == 0.0 {
        Err("–î–µ–ª–µ–Ω–∏–µ –Ω–∞ –Ω–æ–ª—å".into())
    } else {
        Ok(a / b)
    }
}
```

### –û–ø–µ—Ä–∞—Ç–æ—Ä `?`

```rust
fn read_username() -> Result<String, std::io::Error> {
    let mut s = String::new();
    std::fs::File::open("username.txt")?.read_to_string(&mut s)?;
    Ok(s)
}
```

* –û–ø–µ—Ä–∞—Ç–æ—Ä `?` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫—É –≤—ã–∑—ã–≤–∞—é—â–µ–π —Ñ—É–Ω–∫—Ü–∏–∏, –µ—Å–ª–∏ –æ–Ω–∞ –ø—Ä–æ–∏–∑–æ—à–ª–∞.

---

## 4. –ó–∞–ø–∏—Å—å –¥–∞–Ω–Ω—ã—Ö –≤ —Ñ–∞–π–ª

```rust
use std::fs::File;
use std::io::Write;

fn main() -> std::io::Result<()> {
    let mut file = File::create("output.txt")?;
    file.write_all(b"–ü—Ä–∏–≤–µ—Ç, —Ñ–∞–π–ª!")?;
    Ok(())
}
```

* `File::create(path)` —Å–æ–∑–¥–∞–µ—Ç (–∏–ª–∏ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç) —Ñ–∞–π–ª.
* `write_all` –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –≤—Å–µ –¥–∞–Ω–Ω—ã–µ (–≤ –±–∞–π—Ç–∞—Ö).

---

## 5. –ß—Ç–µ–Ω–∏–µ –∏–∑ —Ñ–∞–π–ª–∞

```rust
use std::fs::File;
use std::io::{self, Read};

fn main() -> io::Result<()> {
    let mut file = File::open("output.txt")?;
    let mut contents = String::new();
    file.read_to_string(&mut contents)?;
    println!("–°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞: {}", contents);
    Ok(())
}
```

### –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: –∫–æ—Ä–æ—Ç–∫–∏–π —Å–ø–æ—Å–æ–±

```rust
use std::fs;

fn main() -> std::io::Result<()> {
    let contents = fs::read_to_string("output.txt")?;
    println!("–§–∞–π–ª: {}", contents);
    Ok(())
}
```

---

## 6. –ò—Ç–æ–≥

1. **–ü–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏–µ `Option<T>`**:

   * –ü—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –º–æ–∂–µ—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å: `Some(value)` –∏–ª–∏ `None`.
   * –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ `null`.
   * –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `match`, `if let`, –∏–ª–∏ –º–µ—Ç–æ–¥—ã (`unwrap_or`, `map`, `and_then` –∏ —Ç.–¥.).

2. **–ü–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏–µ `Result<T, E>`**:

   * –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è —É—Å–ø–µ—à–Ω–æ–≥–æ (`Ok`) –∏–ª–∏ –æ—à–∏–±–æ—á–Ω–æ–≥–æ (`Err`) —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞.
   * –ü–æ–∑–≤–æ–ª—è–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏ –±–µ–∑ –ø–∞–Ω–∏–∫–∏.
   * –ú–µ—Ç–æ–¥ `?` –æ–±–ª–µ–≥—á–∞–µ—Ç –ø–µ—Ä–µ–¥–∞—á—É –æ—à–∏–±–æ–∫ –≤–≤–µ—Ä—Ö –ø–æ —Å—Ç–µ–∫—É –≤—ã–∑–æ–≤–æ–≤.

3. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**:

   * `panic!` –∑–∞–≤–µ—Ä—à–∞–µ—Ç –ø—Ä–æ–≥—Ä–∞–º–º—É ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –∫—Ä–∞–π–Ω–∏—Ö —Å–ª—É—á–∞—è—Ö.
   * `Result` –∏ `Option` ‚Äî –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω—ã–π —Å–ø–æ—Å–æ–± –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫.
   * `unwrap()` –∏ `expect()` ‚Äî –±—ã—Å—Ç—Ä–æ–µ, –Ω–æ –Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π.

4. **–ß—Ç–µ–Ω–∏–µ –∏–∑ —Ñ–∞–π–ª–∞**:

   * `File::open` + `read_to_string` –∏–ª–∏ `fs::read_to_string`.
   * –¢—Ä–µ–±—É–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ `Result`, —Ç–∞–∫ –∫–∞–∫ –æ–ø–µ—Ä–∞—Ü–∏—è –º–æ–∂–µ—Ç –∑–∞–≤–µ—Ä—à–∏—Ç—å—Å—è —Å –æ—à–∏–±–∫–æ–π.

5. **–ó–∞–ø–∏—Å—å –≤ —Ñ–∞–π–ª**:

   * `File::create` + `write_all`.
   * –î–∞–Ω–Ω—ã–µ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ –≤–∏–¥–µ –±–∞–π—Ç–æ–≤ (`b"..."`).
   * –í–∞–∂–Ω–æ –∑–∞–∫—Ä—ã–≤–∞—Ç—å —Ñ–∞–π–ª (–ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ –∏–∑ –æ–±–ª–∞—Å—Ç–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏).

üöÄ **–†–µ—Å—É—Ä—Å—ã:**

* YouTube: –ì–æ—à–∞ –î—É–¥–∞—Ä—å ‚Äî [–ò–∑—É—á–µ–Ω–∏–µ Rust (–≤–∏–¥–µ–æ)](https://www.youtube.com/watch?v=0Ta8VEjYSFM&list=PL0lO_mIqDDFU_3UaxCF6p98ELxXpAyHpW&index=9)

