**Тема 3. Сложные типы данных: кортежи, структуры, перечисления**

**Цель занятия:**

* Научиться использовать композитные типы данных.
* Научиться объявлять кортежи, структуры и перечисления, обращаться к их элементам и использовать их в логике программы.

---

**1. Кортежи (tuples)**

Кортеж — это упорядоченная коллекция значений разных типов.

Пример объявления:

```rust
let person: (u32, f64, char) = (30, 70.5, 'M');
```

Обращение к элементам:

```rust
let age = person.0;
let weight = person.1;
let gender = person.2;
```

Особенности:

* Фиксированная длина.
* Используется для краткосрочного объединения данных.
* Может быть возвращён из функции как способ вернуть несколько значений.

Пустой кортеж `()` — это тип "ничего", часто используется как возвращаемый тип у функций без `return`.

---

**2. Структуры (structs)**

Структура объединяет связанные данные под одним именем с именованными полями.

Объявление:

```rust
struct Person {
    name: String,
    age: u8,
}
```

Создание экземпляра:

```rust
let user = Person {
    name: String::from("Alice"),
    age: 25,
};
```

Обращение к полям:

```rust
println!("{} is {} years old", user.name, user.age);
```

Можно использовать синтаксис обновления структуры:

```rust
let user2 = Person { age: 30, ..user };
```

**Tuple-structs** (структуры без именованных полей):

```rust
struct Color(u8, u8, u8);
```

**Unit-structs** (структуры без полей):

```rust
struct Marker;
```

---

**3. Перечисления (enums)**

Перечисления позволяют определить тип, который может иметь несколько вариантов (альтернатив), часто с данными.

Пример:

```rust
enum Direction {
    Up,
    Down,
    Left,
    Right,
}
```

С вариантами с данными:

```rust
enum Message {
    Quit,
    Move { x: i32, y: i32 },
    Write(String),
    ChangeColor(i32, i32, i32),
}
```

Использование:

```rust
let m = Message::Write(String::from("Hello"));
```

---

**4. Сопоставление с шаблоном (pattern matching)**

Для работы с перечислениями используется `match`:

```rust
fn print_direction(dir: Direction) {
    match dir {
        Direction::Up => println!("Going up"),
        Direction::Down => println!("Going down"),
        _ => println!("Other direction"),
    }
}
```

Можно также использовать `if let` и `while let`:

```rust
if let Message::Write(text) = m {
    println!("Text message: {}", text);
}
```

---

**5. Когда использовать что**

| Тип          | Когда использовать                                        |
| ------------ | --------------------------------------------------------- |
| Кортеж       | Временное объединение разных типов, без имен              |
| Структура    | Объединение логически связанных данных с именами          |
| Перечисление | Когда переменная может быть **одним из многих** вариантов |

---

**Практические примеры:**

* Структура `User` для хранения профиля.
* Перечисление `Result<T, E>` — основа работы с ошибками.
* Перечисление `Option<T>` — альтернатива `null`.

---

**Выводы:**

* Кортежи — для временных групп значений.
* Структуры — для создания логически целостных объектов с полями.
* Перечисления — мощный инструмент для моделирования вариантов состояний и поведения.

---

**Рекомендуемые ресурсы:**

* [The Rust Book. Глава 5](https://doc.rust-lang.ru/book/ch05-00-structs.html)
* [Глава 6 (перечисления)](https://doc.rust-lang.ru/book/ch06-00-enums.html)
* [Rust by Example](https://doc.rust-lang.ru/rust-by-example/custom_types.html)